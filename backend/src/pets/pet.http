### Variáveis
@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6IjEyM0BnbWFpbC5jb20iLCJzdWIiOiIwODZjZDk1YS1mZTRjLTRhMjUtOTMwNS1iM2ZlMTNjYzg3MTIiLCJpYXQiOjE3Njk4NzIxMTksImV4cCI6MTc2OTk1ODUxOX0.j5qU1NnuelfOx9tZHRO9pmXuUxo-rakrCsRDOOwDLec
@token-outro-usuario = 
@petId = ab8c8b49-edf0-4217-a585-697c0195eefb
@ownerId = 6e32e16d-e1b9-45c1-bdde-e765cb7cd829

### ====================================
### PETS - CRUD Completo
### ====================================

### Criar Pet (Cachorro)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### Criar Pet (Gato)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Mimi",
  "type": "GATO",
  "race": "Persa",
  "dateOfBirth": "2021-03-20",
  "ownerId": "{{ownerId}}"
}

### Listar todos os Pets
GET {{baseUrl}}/pets
Authorization: Bearer {{token}}

### Listar Pets de um Owner específico
GET {{baseUrl}}/pets?ownerId={{ownerId}}
Authorization: Bearer {{token}}

### Buscar Pet por ID
GET {{baseUrl}}/pets/{{petId}}
Authorization: Bearer {{token}}

### Atualizar Pet completo
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex Atualizado",
  "type": "CACHORRO",
  "race": "Labrador",
  "dateOfBirth": "2020-05-15"
}

### Atualizar apenas o nome
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex Jr."
}

### Atualizar apenas a raça
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "race": "Vira-lata"
}

### Atualizar apenas o tipo
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "type": "GATO"
}

### Transferir Pet para outro Owner
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "ownerId": "9332bf71-9226-4350-af04-7620d988b9bd"
}

### Deletar Pet
DELETE {{baseUrl}}/pets/{{petId}}
Authorization: Bearer {{token}}

### ====================================
### TESTES DE VALIDAÇÃO
### ====================================

### Criar Pet - Tipo inválido (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "DINOSSAURO",
  "race": "T-Rex",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - Data inválida (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "data-invalida",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - Owner inexistente (deve falhar - 404)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "00000000-0000-0000-0000-000000000000"
}

### Criar Pet - Sem nome (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - UUID inválido (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "id-invalido-123"
}

### Criar Pet - Sem tipo (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - Sem raça (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - Sem data de nascimento (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "ownerId": "{{ownerId}}"
}

### Criar Pet - Sem ownerId (deve falhar - 400)
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15"
}

### Buscar Pet inexistente (deve retornar 404)
GET {{baseUrl}}/pets/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{token}}

### Atualizar Pet inexistente (deve retornar 404)
PATCH {{baseUrl}}/pets/00000000-0000-0000-0000-000000000000
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Teste"
}

### Deletar Pet inexistente (deve retornar 404)
DELETE {{baseUrl}}/pets/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{token}}

### Criar Pet sem autenticação (deve falhar - 401)
POST {{baseUrl}}/pets
Content-Type: application/json

{
  "name": "Rex",
  "type": "CACHORRO",
  "race": "Golden Retriever",
  "dateOfBirth": "2020-05-15",
  "ownerId": "{{ownerId}}"
}

### ====================================
### TESTES DE AUTORIZAÇÃO
### ====================================

### Criar Pet com usuário 1
POST {{baseUrl}}/pets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Pet do Usuário 1",
  "type": "CACHORRO",
  "race": "Bulldog",
  "dateOfBirth": "2022-03-10",
  "ownerId": "{{ownerId}}"
}

### Copie o ID do pet criado acima e cole em {{petId}}
### Faça login com outro usuário e tente atualizar (deve falhar - 401)
PATCH {{baseUrl}}/pets/{{petId}}
Content-Type: application/json
Authorization: Bearer {{token-outro-usuario}}

{
  "name": "Tentando mudar"
}

### Faça login com outro usuário e tente deletar (deve falhar - 401)
DELETE {{baseUrl}}/pets/{{petId}}
Authorization: Bearer {{token-outro-usuario}}